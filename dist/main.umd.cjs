(function(o,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("react"),require("@mui/material"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","@mui/material","uuid"],t):(o=typeof globalThis<"u"?globalThis:o||self,t(o.main={},o.React,o.material,o.uuid))})(this,function(o,t,c,g){"use strict";let r={uuids:{}},u=[];const n={blockingStarted:e=>{r.uuids[e]=!0,r={...r},l()},blockingStopped:e=>{delete r.uuids[e],r={...r},l()},subscribe(e){return u=[...u,e],()=>{u=u.filter(i=>i!==e)}},getSnapshot(){return r}};function l(){for(let e of u)e()}function d(){const e=t.useSyncExternalStore(n.subscribe,n.getSnapshot);return Object.keys(e.uuids).length>0}function k(){return d()?t.createElement(c.Box,{sx:{display:"flex",backgroundColor:"rgba(0,0,0,0.4)",alignItems:"center",alignContent:"center",justifyItems:"center",justifyContent:"center",position:"fixed",height:"100vh",width:"100vw",zIndex:15e3,left:0,top:0}},t.createElement(c.CircularProgress,{color:"primary",thickness:6,size:50})):null}function b(){const e=r.uuids;return Object.keys(e).length>0}function a(e){n.blockingStarted(e)}function S(e){n.blockingStopped(e)}function p(e){const i=t.useRef(""),s=t.useSyncExternalStore(n.subscribe,n.getSnapshot).uuids[i.current];return t.useEffect(()=>(i.current=g.v4(),()=>{n.blockingStopped(i.current)}),[]),t.useEffect(()=>{!s&&e?n.blockingStarted(i.current):s&&e===!1&&n.blockingStopped(i.current)},[e,s]),{blockingStarted:t.useCallback(()=>{n.blockingStarted(i.current)},[]),blockingStopped:t.useCallback(()=>{n.blockingStopped(i.current)},[])}}function m(e){const{blockingStarted:i,blockingStopped:f}=p();return async(...s)=>{i();const y=await e(...s);return f(),y}}const h={useIsUserInputBlocked:d,isUserInputBlocked:b,useBlockUserInput:p,useWrapPromise:m,blockingStarted:a,blockingStopped:S,View:k};o.BlockUserInput=h,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
