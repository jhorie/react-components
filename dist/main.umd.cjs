(function(r,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("react"),require("@mui/material"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","@mui/material","uuid"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.main={},r.React,r.material,r.uuid))})(this,function(r,t,c,p){"use strict";let o={uuids:{}},u=[];const n={blockingStarted:e=>{o.uuids[e]=!0,o={...o},l()},blockingStopped:e=>{delete o.uuids[e],o={...o},l()},subscribe(e){return u=[...u,e],()=>{u=u.filter(i=>i!==e)}},getSnapshot(){return o}};function l(){for(let e of u)e()}function d(){const e=t.useSyncExternalStore(n.subscribe,n.getSnapshot);return Object.keys(e.uuids).length>0}function g(){return d()?t.createElement(c.Box,{sx:{display:"flex",backgroundColor:"rgba(0,0,0,0.4)",alignItems:"center",alignContent:"center",justifyItems:"center",justifyContent:"center",position:"fixed",height:"100vh",width:"100vw",zIndex:15e3,left:0,top:0}},t.createElement(c.CircularProgress,{color:"primary",thickness:6,size:50})):null}function k(){const e=o.uuids;return Object.keys(e).length>0}function b(e){n.blockingStarted(e)}function S(e){n.blockingStopped(e)}function f(e){const i=t.useRef(""),s=t.useSyncExternalStore(n.subscribe,n.getSnapshot).uuids[i.current];return t.useEffect(()=>(i.current=p.v4(),()=>{n.blockingStopped(i.current)}),[]),t.useEffect(()=>{!s&&e?n.blockingStarted(i.current):s&&e===!1&&n.blockingStopped(i.current)},[e,s]),{startLoading:t.useCallback(()=>{n.blockingStarted(i.current)},[]),stopLoading:t.useCallback(()=>{n.blockingStopped(i.current)},[])}}function m(e){const{startLoading:i,stopLoading:a}=f();return async(...s)=>{i();const y=await e(...s);return a(),y}}const h={useIsUserInputBlocked:d,isUserInputBlocked:k,useBlockUserInput:f,useWrapPromise:m,blockingStarted:b,blockingStopped:S,View:g};r.BlockUserInput=h,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
