(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("react"),require("@mui/material"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","@mui/material","uuid"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i.main={},i.React,i.material,i.uuid))})(this,function(i,t,c,p){"use strict";let u={uuids:{}},o=[];const r={blockingStarted:e=>{u.uuids[e]=!0,u={...u},l()},blockingStopped:e=>{delete u.uuids[e],u={...u},l()},subscribe(e){return o=[...o,e],()=>{o=o.filter(n=>n!==e)}},getSnapshot(){return u}};function l(){for(let e of o)e()}function d(){const e=t.useSyncExternalStore(r.subscribe,r.getSnapshot);return Object.keys(e.uuids).length>0}function g(){return d()?t.createElement(c.Box,{sx:{display:"flex",backgroundColor:"rgba(0,0,0,0.4)",alignItems:"center",alignContent:"center",justifyItems:"center",justifyContent:"center",position:"fixed",height:"100vh",width:"100vw",zIndex:15e3,left:0,top:0}},t.createElement(c.CircularProgress,{color:"primary",thickness:6,size:50})):null}function k(){const e=u.uuids;return Object.keys(e).length>0}function f(e){const n=t.useRef(""),s=t.useSyncExternalStore(r.subscribe,r.getSnapshot).uuids[n.current];return t.useEffect(()=>(n.current=p.v4(),()=>{r.blockingStopped(n.current)}),[]),t.useEffect(()=>{!s&&e?r.blockingStarted(n.current):s&&e===!1&&r.blockingStopped(n.current)},[e,s]),{startLoading:t.useCallback(()=>{r.blockingStarted(n.current)},[]),stopLoading:t.useCallback(()=>{r.blockingStopped(n.current)},[])}}function b(e){const{startLoading:n,stopLoading:a}=f();return async(...s)=>{n();const m=await e(...s);return a(),m}}const S={useIsUserInputBlocked:d,isUserInputBlocked:k,useBlockUserInput:f,useWrapPromise:b,View:g};i.BlockUserInput=S,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
